<!doctype html>
<html>
<head><meta charset="utf-8"><title>Cambiar contraseña</title></head>
<body>
  <h1>Cambiar contraseña</h1>

  <!-- Mostrar mensajes de Django messages (opcional pero útil) -->
  {% if messages %}
    <ul>
      {% for message in messages %}
        <li style="color:blue;">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <!-- Errores no asociados a campos -->
  {% if form.non_field_errors %}
    <ul style="color:red;">
      {% for err in form.non_field_errors %}
        <li>{{ err }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  <form method="post" action="">
    {% csrf_token %}

    <!-- Mostrar help_text (reglas/ayuda) -->
    {% if form.new_password1.help_text %}
      <div class="help-text" style="margin-bottom:10px;">
        {{ form.new_password1.help_text|safe }}
      </div>
    {% endif %}

    <!-- Mostrar errores por campo de forma clara -->
    <div>
      <label for="{{ form.new_password1.id_for_label }}">Contraseña nueva:</label>
      {{ form.new_password1 }}
      {% if form.new_password1.errors %}
        <ul style="color:red;">
          {% for err in form.new_password1.errors %}
            <li>{{ err }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <div>
      <label for="{{ form.new_password2.id_for_label }}">Contraseña nueva (confirmación):</label>
      {{ form.new_password2 }}
      {% if form.new_password2.errors %}
        <ul style="color:red;">
          {% for err in form.new_password2.errors %}
            <li>{{ err }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <button type="submit">Cambiar la contraseña</button>
  </form>

  <p><a href="{% url 'login' %}">Volver al login</a></p>
</body>
</html>