{% extends "core/base.html" %}
{% block title %}{% if departamento %}Editar Departamento{% else %}Crear Departamento{% endif %}{% endblock %}
{% block content %}
<h4>{% if departamento %}Editar Departamento{% else %}Crear Departamento{% endif %}</h4>
<form method="POST" action="">
    {% csrf_token %}
    {% if departamento %}
        <input type="hidden" name="departamento_id" value="{{ departamento.id }}">
    {% endif %}
    <p>
        <input type="text" name="nombre" placeholder="Nombre Departamento" 
               value="{% if departamento %}{{ departamento.nombre }}{% endif %}" required>
    </p>
    <p>
        <select name="encargado" required>
            <option value="">Seleccione encargado</option>
            {% for encargado in encargados %}
                <option value="{{ encargado.id }}"
                        {% if departamento and departamento.encargado.id == encargado.id %}selected{% endif %}>
                    {{ encargado.username }} ({{ encargado.first_name }} {{ encargado.last_name }})
                </option>
            {% endfor %}
        </select>
    </p>
    <p>
        <input type="email" name="correo_encargado" placeholder="Correo encargado" 
               value="{% if departamento %}{{ departamento.correo_encargado }}{% endif %}" required>
    </p>
    <p>
        <select name="direccion" required>
            <option value="">Seleccione direcci√≥n</option>
            {% for dir in direcciones %}
                <option value="{{ dir.id }}"
                        {% if departamento and departamento.direccion.id == dir.id %}selected{% endif %}>
                    {{ dir.nombre }}
                </option>
            {% endfor %}
        </select>
    </p>
    <p>
        <input type="submit" value="{% if departamento %}Actualizar{% else %}Crear{% endif %}">
    </p>
</form>
<a href="{% url 'administracion:departamento_listar' %}">Volver</a>
{% endblock %}